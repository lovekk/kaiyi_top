(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-574614c8"],{"548e":function(t,e,s){},fcd5:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"container",staticClass:"storeBox"},[t._l(t.storeList,(function(e,a){return s("div",{key:a,staticClass:"storeBox-box",on:{click:function(s){return s.stopPropagation(),t.checked(e)}}},[s("div",{staticClass:"store-img"},[s("img",{attrs:{src:e.image,"lazy-load":"true"}})]),s("div",{staticClass:"store-cent-left"},[s("div",{staticClass:"store-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"store-address line1"},[t._v("\n          "+t._s(e.address)+t._s(", "+e.detailed_address)+"\n        ")])]),s("div",{staticClass:"row-right"},[s("div",[s("a",{staticClass:"store-phone",attrs:{href:"tel:"+e.phone}},[s("span",{staticClass:"iconfont icon-dadianhua01"})])]),s("div",{staticClass:"store-distance",on:{click:function(s){return s.stopPropagation(),t.showMaoLocation(e)}}},[e.range?s("span",{staticClass:"addressTxt"},[t._v("距离"+t._s(e.range)+"千米")]):s("span",{staticClass:"addressTxt"},[t._v("查看地图")]),s("span",{staticClass:"iconfont icon-youjian"})])])])})),s("Loading",{attrs:{loaded:t.loaded,loading:t.loading}})],2),s("div",[t.locationShow?s("iframe",{ref:"geoPage",staticStyle:{display:"none"},attrs:{width:"0",height:"0",frameborder:"0",scrolling:"no",src:"https://apis.map.qq.com/tools/geolocation?key="+t.mapKey+"&referer=myapp"}}):t._e()]),t.mapShow?s("div",{staticClass:"geoPage"},[s("iframe",{attrs:{width:"100%",height:"100%",frameborder:"0",scrolling:"no",src:"https://apis.map.qq.com/uri/v1/geocoder?coord="+t.system_store.latitude+","+t.system_store.longitude+"&referer="+t.mapKey}})]):t._e()])},o=[],i=(s("cc57"),s("3a5e")),n=s("73f5"),r=s("ed08"),c=s("74f9"),d=s("08c1"),l=s("d0a4"),g="user_longitude",u="user_latitude",h="mapKey",f={name:"storeList",components:{Loading:i["a"]},computed:Object(d["b"])(["goName"]),data:function(){return{page:1,limit:20,loaded:!1,loading:!1,storeList:[],mapShow:!1,system_store:{},mapKey:l["a"].get(h),locationShow:!1}},mounted:function(){var t=this;l["a"].get(g)&&l["a"].get(u)?this.getList():this.selfLocation(),this.$scroll(this.$refs.container,(function(){!t.loading&&t.getList()}))},methods:{selfLocation:function(){if(Object(r["d"])()){var t=this;Object(c["wechatEvevt"])("getLocation",{type:"wgs84"}).then((function(e){var s=e.latitude,a=e.longitude;l["a"].set(u,s),l["a"].set(g,a),t.getList()})).catch((function(e){e.is_ready&&e.wx.getLocation({success:function(e){var s=e.latitude,a=e.longitude;l["a"].set(u,s),l["a"].set(g,a),t.getList()},cancel:function(){t.$dialog.error("取消获取位置"),l["a"].remove(u),l["a"].remove(g),t.getList()},fail:function(){t.$dialog.error("授权失败"),l["a"].remove(u),l["a"].remove(g),t.getList()}})}))}else{if(!l["a"].get(h))return this.$dialog.error("暂无法使用查看地图，请配置您的腾讯地图key");var e,s=this;l["a"].get(h)&&(s.locationShow=!0),window.addEventListener("message",(function(t){e=t.data,console.log("location",e),e&&"geolocation"==e.module?(l["a"].set(u,e.lat),l["a"].set(g,e.lng),s.getList()):(l["a"].remove(u),l["a"].remove(g),s.getList(),console.log("定位失败"))}),!1)}},showMaoLocation:function(t){if(this.system_store=t,Object(r["d"])()){var e={latitude:parseFloat(this.system_store.latitude),longitude:parseFloat(this.system_store.longitude),name:this.system_store.name,address:this.system_store.address+this.system_store.detailed_address};Object(c["wechatEvevt"])("openLocation",e).then((function(t){console.log(t)})).catch((function(t){t.is_ready&&t.wx.openLocation(e)}))}else{if(!l["a"].get(h))return this.$dialog.error("暂无法使用查看地图，请配置您的腾讯地图key");this.mapShow=!0}},checked:function(t){"orders"===this.goName&&(this.$router.go(-1),this.$store.commit("GET_STORE",t))},getList:function(){var t=this;if(!this.loading&&!this.loaded){this.loading=!0;var e={latitude:l["a"].get(u)||"",longitude:l["a"].get(g)||"",page:this.page,limit:this.limit};Object(n["q"])(e).then((function(e){t.loading=!1,t.loaded=e.data.list.length<t.limit,t.storeList.push.apply(t.storeList,e.data.list),t.page=t.page+1})).catch((function(e){t.$dialog.error(e.msg)}))}}}},m=f,p=(s("fd9f"),s("623f")),v=Object(p["a"])(m,a,o,!1,null,"1e5ef9ec",null);e["default"]=v.exports},fd9f:function(t,e,s){"use strict";var a=s("548e"),o=s.n(a);o.a}}]);
//# sourceMappingURL=chunk-574614c8.752c22b3.js.map