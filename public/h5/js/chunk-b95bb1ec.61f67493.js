(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b95bb1ec"],{"0d51":function(t,e,s){},"64c5":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.domStatus,expression:"domStatus"}],class:[t.posterImageStatus?"noscroll product-con":"product-con"],nativeOn:{scroll:function(e){return t.onScroll(e)}}},[s("div",{ref:"header",staticClass:"header acea-row row-center-wrapper",style:"opacity:"+t.opacity},t._l(t.navList,function(e,o){return s("div",{key:o,staticClass:"item",class:t.navActive===o?"on":"",on:{click:function(e){return t.asideTap(o)}}},[t._v("\n      "+t._s(e)+"\n    ")])}),0),s("div",{attrs:{id:"title0"}},[s("ProductConSwiper",{attrs:{imgUrls:t.imgUrls}}),s("div",{staticClass:"wrapper"},[s("div",{staticClass:"share acea-row row-between row-bottom"},[s("div",{staticClass:"money font-color-red"},[t._v("\n          ￥"),s("span",{staticClass:"num",domProps:{textContent:t._s(t.storeInfo.price)}}),s("span",{staticClass:"y-money",domProps:{textContent:t._s("￥"+t.storeInfo.product_price)}})]),s("div",{staticClass:"iconfont icon-fenxiang",on:{click:t.setPosterImageStatus}})]),s("div",{staticClass:"introduce",domProps:{textContent:t._s(t.storeInfo.title)}}),s("div",{staticClass:"label acea-row row-between-wrapper"},[s("div",{domProps:{textContent:t._s("类型："+t.storeInfo.people+"人团")}}),s("div",[t._v("累计销量："+t._s(t.storeInfo.total?t.storeInfo.total:0)+" 件")]),s("div",[t._v("\n          限量: "+t._s(t.storeInfo.quota_show?t.storeInfo.quota_show:0)+"件\n        ")])])]),0!==t.attr.productAttr.length?s("div",{staticClass:"attribute acea-row row-between-wrapper",on:{click:t.selecAttrTap}},[s("div",[t._v("\n        "+t._s(t.attrTxt)+"："),s("span",{staticClass:"atterTxt"},[t._v(t._s(t.attrValue))])]),s("div",{staticClass:"iconfont icon-jiantou"})]):t._e(),s("div",{staticClass:"notice acea-row row-middle"},[s("div",{staticClass:"num font-color-red"},[s("span",{staticClass:"iconfont icon-laba"}),t._v("已拼"+t._s(t.storeInfo.sales)+t._s(t.storeInfo.unit_name)),s("span",{staticClass:"line"},[t._v("|")])]),s("div",{staticClass:"swiper-no-swiping swiper"},[s("swiper",{staticClass:"swiper-wrapper",attrs:{options:t.swiperTip}},t._l(t.itemNew,function(e,o){return s("swiperSlide",{key:o,staticClass:"swiper-slide"},[s("div",{staticClass:"line1"},[t._v(t._s(e))])])}),1)],1)]),s("div",{staticClass:"assemble"},[t.groupList?s("div",t._l(t.groupList,function(e,o){return s("div",{key:o},[o<t.groupListCount?s("div",{staticClass:"item acea-row row-between-wrapper"},[s("div",{staticClass:"pictxt acea-row row-between-wrapper"},[s("div",{staticClass:"pictrue"},[s("img",{staticClass:"image",attrs:{src:e.avatar}})]),s("div",{staticClass:"text line1",domProps:{textContent:t._s(e.nickname)}})]),s("div",{staticClass:"right acea-row row-middle"},[s("div",[s("div",{staticClass:"lack"},[t._v("\n                  还差"),s("span",{staticClass:"font-color-red",domProps:{textContent:t._s(e.count)}}),t._v("人成团\n                ")]),s("CountDown",{attrs:{"is-day":!1,"tip-text":"剩余 ","day-text":"","hour-text":":","minute-text":":","second-text":"",datatime:e.stop_time}})],1),s("div",{staticClass:"spellBnt",on:{click:function(s){return t.groupRule(e.id)}}},[t._v("\n                去拼单"),s("span",{staticClass:"iconfont icon-jiantou"})])])]):t._e()])}),0):t._e(),t.groupList.length>t.groupListCount?s("div",{staticClass:"more",on:{click:t.setGroupListCount}},[t._v("\n        查看更多"),s("span",{staticClass:"iconfont icon-xiangxia"})]):t._e()]),t._m(0)],1),s("div",{staticClass:"userEvaluation",attrs:{id:"title1"}},[s("div",{staticClass:"title acea-row row-between-wrapper"},[s("div",{domProps:{textContent:t._s("用户评价("+t.replyCount+")")}}),s("div",{staticClass:"praise",on:{click:t.goReply}},[s("span",{staticClass:"font-color-red",domProps:{textContent:t._s(t.replyChance+"%")}}),t._v("好评率"),s("span",{staticClass:"iconfont icon-jiantou"})])]),0!==t.reply.length?s("UserEvaluation",{attrs:{reply:t.reply}}):t._e()],1),s("div",{staticClass:"product-intro",attrs:{id:"title2"}},[s("div",{staticClass:"title"},[t._v("产品介绍")]),s("div",{staticClass:"conter",domProps:{innerHTML:t._s(t.storeInfo.description)}})]),s("div",{staticStyle:{height:"1.2rem"}}),s("div",{staticClass:"footer-group product-con acea-row row-between-wrapper"},[s("div",{staticClass:"customerSer acea-row row-center-wrapper row-column",on:{click:function(e){return t.$router.push({path:"/customer/list"})}}},[s("div",{staticClass:"iconfont icon-kefu"}),s("div",[t._v("客服")])]),s("div",{staticClass:"item acea-row row-center-wrapper row-column",on:{click:t.setCollect}},[s("div",{staticClass:"iconfont",class:t.storeInfo.userCollect?"icon-shoucang1":"icon-shoucang"}),s("div",[t._v("收藏")])]),t.attr.productSelect.quota>0&&t.attr.productSelect.product_stock>0?s("div",{staticClass:"bnt acea-row"},[s("div",{staticClass:"joinCart",on:{click:t.openAlone}},[t._v("单独购买")]),s("div",{staticClass:"buy",on:{click:t.openTeam}},[t._v("立即开团")])]):t._e(),t.attr.productSelect.quota<=0||t.attr.productSelect.product_stock<=0?s("div",{staticClass:"bnt acea-row"},[s("div",{staticClass:"joinCart",on:{click:t.openAlone}},[t._v("单独购买")]),s("div",{staticClass:"buy bg-color-hui"},[t._v("已售罄")])]):t._e()]),s("ProductWindow",{attrs:{attr:t.attr},on:{changeFun:t.changeFun}}),s("StorePoster",{attrs:{posterImageStatus:t.posterImageStatus,posterData:t.posterData},on:{setPosterImageStatus:t.setPosterImageStatus}})],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"playWay"},[s("div",{staticClass:"title acea-row row-between-wrapper"},[s("div",[t._v("拼团玩法")])]),s("div",{staticClass:"way acea-row row-middle"},[s("div",{staticClass:"item way_font"},[s("span",{staticClass:"num"},[t._v("①")]),t._v("开团/参团")]),s("div",{staticClass:"iconfont icon-arrow"}),s("div",{staticClass:"item way_font"},[s("span",{staticClass:"num"},[t._v("②")]),t._v("邀请好友")]),s("div",{staticClass:"iconfont icon-arrow"}),s("div",{staticClass:"item way_font"},[s("div",[s("span",{staticClass:"num"},[t._v("③")]),t._v("满员发货")])])])])}],i=s("7618"),a=(s("55dd"),s("28a5"),s("5df3"),s("1c4c"),s("7f7f"),s("7212")),c=(s("e5d0"),s("c5f8")),n=s("5608"),u=s("edc3"),l=s("c6da"),d=s("cbd6"),p=s("ca41"),h=s("73f5"),f=s("e876"),m=s("ed08"),v=s("74f9"),_=s("c24f"),w=s("f7fe"),S=s.n(w),C="GroupDetails",g={name:"GroupDetails",components:{ProductConSwiper:c["a"],CountDown:n["a"],UserEvaluation:u["a"],swiper:a["swiper"],swiperSlide:a["swiperSlide"],ProductWindow:l["a"],StorePoster:d["a"]},props:{},data:function(){return{domStatus:!1,posterData:{image:"",title:"",price:"",code:""},posterImageStatus:!1,reply:[],replyCount:0,replyChance:0,imgUrls:[],storeInfo:{},itemNew:{},groupListCount:2,groupList:{},swiperTip:{direction:"vertical",autoplay:{disableOnInteraction:!1,delay:2e3},loop:!0,speed:1e3,observer:!0,observeParents:!0},attr:{cartAttr:!1,productSelect:{image:"",store_name:"",price:"",quota:0,quota_show:0,unique:"",cart_num:1,product_stock:0},productAttr:[]},attrTxt:"请选择",isOpen:!1,attrValue:"",productValue:[],navList:[],lock:!1,navActive:0,opacity:0,storeSelfMention:!0,storeItems:{},activity:[]}},watch:{$route:function(t){var e=this;t.name===C&&e.mountedStart()}},mounted:function(){document.addEventListener("scroll",this.onScroll,!1),window.addEventListener("scroll",this.handleScroll),this.mountedStart()},methods:{setCollect:function(){var t=this,e=t.storeInfo.product_id,s="product";t.storeInfo.userCollect?Object(_["n"])(e,s).then(function(){t.storeInfo.userCollect=!t.storeInfo.userCollect}):Object(_["m"])(e,s).then(function(){t.storeInfo.userCollect=!t.storeInfo.userCollect})},selecAttrTap:function(){this.attr.cartAttr=!0,this.isOpen=!0},openAlone:function(){this.$router.push({path:"/detail/"+this.storeInfo.product_id})},mountedStart:function(){var t=this,e=t.$route.params.id;Object(p["m"])(e).then(function(e){t.$set(t,"storeInfo",e.data.storeInfo),t.$set(t,"imgUrls",e.data.storeInfo.images),t.$set(t,"itemNew",e.data.pink_ok_list),t.$set(t,"groupList",e.data.pink),e.data.reply&&t.$set(t,"reply",Array.from(e.data.reply)||[]),t.$set(t,"replyCount",e.data.replyCount),t.$set(t,"replyChance",e.data.replyChance),t.setProductSelect(),t.posterData.image=t.storeInfo.image_base,t.storeInfo.title.length>30?t.posterData.title=t.storeInfo.title.substring(0,30)+"...":t.posterData.title=t.storeInfo.title,t.posterData.price=t.storeInfo.price,t.posterData.code=t.storeInfo.code_base,t.attr.productAttr=e.data.productAttr,t.productValue=e.data.productValue,t.domStatus=!0;var s=["商品","评价","详情"];t.navList=s,t.getImageBase64(),t.setShare(),t.updateTitle(),t.DefaultSelect()}).catch(function(e){t.$dialog.error(e.msg),t.$router.go(-1)})},DefaultSelect:function(){var t=this.attr.productAttr,e=[];for(var s in this.productValue)if(this.productValue[s].quota>0){e=this.attr.productAttr.length?s.split(","):[];break}for(var o=0;o<t.length;o++)this.$set(t[o],"index",e[o]);this.$set(this.attr.productSelect,"num",this.storeInfo.num);var r=this.productValue[e.sort().join(",")];r&&t.length?(this.$set(this.attr.productSelect,"store_name",this.storeInfo.title),this.$set(this.attr.productSelect,"image",r.image),this.$set(this.attr.productSelect,"price",r.price),this.$set(this.attr.productSelect,"quota",r.quota),this.$set(this.attr.productSelect,"unique",r.unique),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this.attr.productSelect,"product_stock",r.product_stock),this.$set(this.attr.productSelect,"quota_show",r.quota_show),this.$set(this,"attrValue",e.sort().join(",")),this.$set(this,"attrTxt","已选择")):!r&&t.length?(this.$set(this.attr.productSelect,"store_name",this.storeInfo.title),this.$set(this.attr.productSelect,"image",this.storeInfo.image),this.$set(this.attr.productSelect,"price",this.storeInfo.price),this.$set(this.attr.productSelect,"quota",this.storeInfo.quota||0),this.$set(this.attr.productSelect,"unique",""),this.$set(this.attr.productSelect,"cart_num",0),this.$set(this.attr.productSelect,"quota_show",this.storeInfo.quota_show||0),this.$set(this.attr.productSelect,"product_stock",this.storeInfo.product_stock||0),this.$set(this,"attrValue",""),this.$set(this,"attrTxt","请选择")):r||t.length||(this.$set(this.attr.productSelect,"store_name",this.storeInfo.title),this.$set(this.attr.productSelect,"image",this.storeInfo.image),this.$set(this.attr.productSelect,"price",this.storeInfo.price),this.$set(this.attr.productSelect,"quota",this.storeInfo.quota||0),this.$set(this.attr.productSelect,"quota_show",this.storeInfo.quota_show||0),this.$set(this.attr.productSelect,"product_stock",this.storeInfo.product_stock||0),this.$set(this.attr.productSelect,"unique",this.storeInfo.unique||""),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this,"attrValue",""),this.$set(this,"attrTxt","请选择"))},updateTitle:function(){document.title=this.storeInfo.title||this.$route.meta.title},setShare:function(){Object(m["d"])()&&Object(v["openShareAll"])({desc:this.storeInfo.info,title:this.storeInfo.title,link:location.href,imgUrl:this.storeInfo.image})},getImageBase64:function(){var t=this;Object(f["m"])(this.posterData.image,t.posterData.code).then(function(e){t.posterData.image=e.data.image,t.posterData.code=e.data.code})},setPosterImageStatus:function(){var t=document.body||document.documentElement;t.scrollTop=0,this.posterImageStatus=!this.posterImageStatus},groupRule:function(t){var e=this;e.$router.push({path:"/activity/group_rule/"+t})},goReply:function(){var t=this;t.$router.push({path:"/evaluate_list/"+t.storeInfo.product_id})},setGroupListCount:function(){this.groupListCount=this.groupListCount+2},changeFun:function(t){"object"!==Object(i["a"])(t)&&(t={});var e=t.action||"",s=void 0===t.value?"":t.value;this[e]&&this[e](s)},changeattr:function(t){var e=this;e.attr.cartAttr=t},ChangeAttr:function(t){var e=this.productValue[t];this.$set(this.attr.productSelect,"num",this.storeInfo.num),e?(this.$set(this.attr.productSelect,"image",e.image),this.$set(this.attr.productSelect,"price",e.price),this.$set(this.attr.productSelect,"quota",e.quota),this.$set(this.attr.productSelect,"unique",e.unique),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this.attr.productSelect,"product_stock",e.product_stock),this.$set(this.attr.productSelect,"quota_show",e.quota_show),this.$set(this,"attrValue",t),this.$set(this,"attrTxt","已选择")):(this.$set(this.attr.productSelect,"image",this.storeInfo.image),this.$set(this.attr.productSelect,"price",this.storeInfo.price),this.$set(this.attr.productSelect,"quota",0),this.$set(this.attr.productSelect,"unique",""),this.$set(this.attr.productSelect,"cart_num",0),this.$set(this.attr.productSelect,"quota_show",0),this.$set(this.attr.productSelect,"product_stock",0),this.$set(this,"attrValue",""),this.$set(this,"attrTxt","请选择"))},ChangeCartNum:function(t){var e=this.productValue[this.attrValue];if(void 0!==e||this.attr.productAttr.length||(e=this.attr.productSelect),void 0!==e){var s=e.quota||0,o=this.storeInfo.num||0,r=this.attr.productSelect,i=r.product_stock||0;if(t){r.cart_num++;var a=[];a.push(o),a.push(s),a.push(i);var c=Math.min.apply(null,a);r.cart_num>=c&&(this.$set(this.attr.productSelect,"cart_num",c||1),this.$set(this,"cart_num",c||1))}else r.cart_num--,r.cart_num<1&&(this.$set(this.attr.productSelect,"cart_num",1),this.$set(this,"cart_num",1))}},setProductSelect:function(){var t=this,e=t.attr;e.productSelect.image=t.storeInfo.image,e.productSelect.store_name=t.storeInfo.title,e.productSelect.price=t.storeInfo.price,e.productSelect.quota=0,e.productSelect.quota_show=0,e.productSelect.product_stock=0,e.cartAttr=!1,t.$set(e.productSelect,"num",t.storeInfo.num),t.$set(t,"attr",e)},openTeam:function(){var t=this,e=this;if(0==e.attr.cartAttr)e.attr.cartAttr=!this.attr.cartAttr;else{var s={};s.productId=e.storeInfo.product_id,s.cartNum=e.attr.productSelect.cart_num,s.uniqueId=e.attr.productSelect.unique,s.combinationId=e.storeInfo.id,s.new=1,Object(h["m"])(s).then(function(t){e.$router.push({path:"/order/submit/"+t.data.cartId})}).catch(function(e){t.$dialog.error(e.msg)})}},handleScroll:function(){var t=document.body.scrollTop||document.documentElement.scrollTop,e=t/350;e=e>1?1:e,this.opacity=e},asideTap:function(t){var e=this;this.$nextTick(function(){var s=t;e.navActive=s;var o=document.querySelector("#title"+s),r=o.offsetTop-e.$refs.header.offsetHeight-window.scrollY;e.lock=!0,window.scrollBy({top:r,left:0,behavior:"smooth"})})},onScroll:S()(function(){var t=this;if(this.lock)this.lock=!1;else{var e=this.$refs.header.offsetHeight,s=window,o=s.scrollY,r=[];r.push(document.querySelector("#title0")),r.push(document.querySelector("#title1")),r.push(document.querySelector("#title2")),r.reduce(function(s,r,i){if(document.querySelector("#title0")||document.querySelector("#title1")||document.querySelector("#title2"))return s||(o+e<r.offsetTop+r.offsetHeight&&(s=!0,t.navActive=i),s)},!1),this.lock=!0}},500)},beforeDestroy:function(){document.removeEventListener("scroll",this.onScroll,!1),window.removeEventListener("scroll",this.handleScroll)}},$=g,I=(s("7996"),s("2877")),y=Object(I["a"])($,o,r,!1,null,"5c99aae2",null);e["default"]=y.exports},7996:function(t,e,s){"use strict";var o=s("0d51"),r=s.n(o);r.a}}]);
//# sourceMappingURL=chunk-b95bb1ec.61f67493.js.map